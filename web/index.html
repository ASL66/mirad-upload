<!-- index.html -->
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Java Web服务器 - 文件上传</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>📁</text></svg>">
    <!-- 引入 PDF.js 库 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.min.js"></script>
</head>
<body>
    <!-- 提示弹窗 -->
    <div class="message-modal" id="message-modal">
        <div class="modal-content">
            <span class="close-btn" id="close-message-modal">&times;</span>
            <h3 id="message-title">提示</h3>
            <p id="message-content"></p>
        </div>
    </div>

    <!-- 预览文件弹窗 -->
    <div class="preview-modal" id="preview-modal">
        <div class="preview-content">
            <div class="preview-header">
                <div class="preview-title" id="preview-title">文件预览</div>
                <span class="close-preview" id="close-preview">&times;</span>
            </div>
            <div class="preview-body" id="preview-body">
                <div class="unsupported-preview">正在加载预览内容...</div>
            </div>
            <div class="preview-nav" id="preview-nav"></div>
            <div class="preview-actions" id="preview-actions"></div>
        </div>
    </div>

    <!-- 登录弹窗 -->
    <div class="auth-modal" id="login-modal">
        <div class="modal-content">
            <span class="close-btn" id="close-login-modal">&times;</span>
            <h3>用户登录</h3>
            <form id="login-form">
                <div class="form-group">
                    <label for="login-username">用户名</label>
                    <input type="text" id="login-username" required>
                </div>
                <div class="form-group">
                    <label for="login-password">密码</label>
                    <input type="password" id="login-password" required>
                </div>
                <div class="form-error" id="login-error"></div>
                <button type="submit" class="auth-btn">登录</button>
                <div class="auth-switch">
                    还没有账号？<a href="#" id="switch-to-register">注册</a>
                </div>
            </form>
        </div>
    </div>

    <!-- 注册弹窗 -->
    <div class="auth-modal" id="register-modal">
        <div class="modal-content">
            <span class="close-btn" id="close-register-modal">&times;</span>
            <h3>用户注册</h3>
            <form id="register-form">
                <div class="form-group">
                    <label for="register-username">用户名</label>
                    <input type="text" id="register-username" required>
                    <small>只能包含字母、数字和下划线，长度3-20</small>
                </div>
                <div class="form-group">
                    <label for="register-password">密码</label>
                    <input type="password" id="register-password" required>
                    <small>长度不能少于6位</small>
                </div>
                <div class="form-error" id="register-error"></div>
                <button type="submit" class="auth-btn">注册</button>
                <div class="auth-switch">
                    已有账号？<a href="#" id="switch-to-login">登录</a>
                </div>
            </form>
        </div>
    </div>

    <div class="container">
        <header>
            <h1>Java Web服务器</h1>
            <div class="user-info" id="user-info">
                <span class="username" id="username-display"></span>
                <button id="logout-btn" class="logout-btn">退出登录</button>
            </div>
        </header>
        
        <div class="dashboard">
            <div class="upload-section">
                <h2>文件上传</h2>
                <div class="upload-box">
                    <form id="upload-form">
                        <div class="file-drop-area" id="drop-zone">
                            <span class="file-msg">拖放文件到此处或点击选择</span>
                            <input type="file" id="file-input" multiple>
                        </div>
                        <div class="progress-container">
                            <div class="progress-bar" id="progress-bar"></div>
                            <span class="progress-text" id="progress-text">0%</span>
                        </div>
                        <div class="error-msg" id="upload-error"></div>
                        <button type="button" id="upload-btn" class="upload-btn">上传文件</button>
                    </form>
                </div>
            </div>
        </div>
        
        <div class="file-list-section">
            <div class="section-header">
                <h2>已上传文件</h2>
                <button id="refresh-btn" class="refresh-btn">刷新列表</button>
            </div>
            <div class="file-list" id="file-list">
                <div class="no-files">请先登录以查看您的文件</div>
            </div>
        </div>
        
        <footer>
            <p>© 2023 Java Web服务器</p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>